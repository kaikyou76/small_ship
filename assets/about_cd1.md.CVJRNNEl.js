import{_ as i,c as a,o as n,ae as h}from"./chunks/framework.4ukD4ZLJ.js";const E=JSON.parse('{"title":"æœ€æ–°","description":"","frontmatter":{},"headers":[],"relativePath":"about/cd1.md","filePath":"about/cd1.md"}'),t={name:"about/cd1.md"};function l(k,s,p,e,F,d){return n(),a("div",null,s[0]||(s[0]=[h(`<p>ä»¥ä¸‹ã¯ã€<strong>æœ¬ç•ªç”¨ D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ Cloudflare ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‹ã‚‰ä½œæˆã™ã‚‹æ‰‹é †æ›¸</strong>ã§ã™ã€‚<br> ã“ã®æ‰‹é †ã§ã¯ <code>kaikyou-shop</code> ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æœ¬ç•ªç’°å¢ƒç”¨ D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆä¾‹: <code>shopping-db-prod</code>ï¼‰ã‚’ä½œæˆã—ã€ãã® <code>database_id</code> ã‚’ <code>wrangler.jsonc</code> ã«è¨­å®šã™ã‚‹ã¨ã“ã‚ã¾ã§è¡Œã„ã¾ã™ã€‚</p><hr><h2 id="âœ…-æ‰‹é †æ›¸-cloudflare-ã‚¿ã‚™ãƒƒã‚·ãƒ¥ãƒ›ã‚™ãƒ¼ãƒˆã‚™ã¦ã‚™æœ¬ç•ªç”¨-d1-ãƒ†ã‚™ãƒ¼ã‚¿ãƒ˜ã‚™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹" tabindex="-1">âœ… æ‰‹é †æ›¸ï¼šCloudflare ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§æœ¬ç•ªç”¨ D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹ <a class="header-anchor" href="#âœ…-æ‰‹é †æ›¸-cloudflare-ã‚¿ã‚™ãƒƒã‚·ãƒ¥ãƒ›ã‚™ãƒ¼ãƒˆã‚™ã¦ã‚™æœ¬ç•ªç”¨-d1-ãƒ†ã‚™ãƒ¼ã‚¿ãƒ˜ã‚™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹" aria-label="Permalink to &quot;âœ… æ‰‹é †æ›¸ï¼šCloudflare ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§æœ¬ç•ªç”¨ D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã™ã‚‹&quot;">â€‹</a></h2><h3 id="_1-cloudflare-ã‚¿ã‚™ãƒƒã‚·ãƒ¥ãƒ›ã‚™ãƒ¼ãƒˆã‚™ã¸ãƒ­ã‚¯ã‚™ã‚¤ãƒ³" tabindex="-1">1. Cloudflare ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ãƒ­ã‚°ã‚¤ãƒ³ <a class="header-anchor" href="#_1-cloudflare-ã‚¿ã‚™ãƒƒã‚·ãƒ¥ãƒ›ã‚™ãƒ¼ãƒˆã‚™ã¸ãƒ­ã‚¯ã‚™ã‚¤ãƒ³" aria-label="Permalink to &quot;1. Cloudflare ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¸ãƒ­ã‚°ã‚¤ãƒ³&quot;">â€‹</a></h3><ul><li>URL: <a href="https://dash.cloudflare.com/" target="_blank" rel="noreferrer">https://dash.cloudflare.com/</a></li><li>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³</li></ul><hr><h3 id="_2-ã€Œworkers-pagesã€ã‚’é–‹ã" tabindex="-1">2. ã€ŒWorkers &amp; Pagesã€ã‚’é–‹ã <a class="header-anchor" href="#_2-ã€Œworkers-pagesã€ã‚’é–‹ã" aria-label="Permalink to &quot;2. ã€ŒWorkers &amp; Pagesã€ã‚’é–‹ã&quot;">â€‹</a></h3><ul><li>å·¦å´ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ <strong>Workers &amp; Pages</strong> ã‚’ã‚¯ãƒªãƒƒã‚¯</li><li>æ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆä¾‹: <code>backend-prod</code> ã¾ãŸã¯ <code>kaikyou-shop</code>ï¼‰ã‚’é¸æŠ<br> ã€€â€»ã¾ã å­˜åœ¨ã—ãªã„å ´åˆã¯å…ˆã« Workers ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ãã ã•ã„</li></ul><hr><h3 id="_3-ã€Œd1ã€ã‚¿ãƒ•ã‚™ã‚’é–‹ã" tabindex="-1">3. ã€ŒD1ã€ã‚¿ãƒ–ã‚’é–‹ã <a class="header-anchor" href="#_3-ã€Œd1ã€ã‚¿ãƒ•ã‚™ã‚’é–‹ã" aria-label="Permalink to &quot;3. ã€ŒD1ã€ã‚¿ãƒ–ã‚’é–‹ã&quot;">â€‹</a></h3><ul><li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè©³ç´°ç”»é¢ã«ã‚ã‚‹ <strong>D1</strong> ã‚¿ãƒ–ã‚’é¸æŠ</li></ul><hr><h3 id="_4-d1-ãƒ†ã‚™ãƒ¼ã‚¿ãƒ˜ã‚™ãƒ¼ã‚¹ã‚’ä½œæˆ" tabindex="-1">4. D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ <a class="header-anchor" href="#_4-d1-ãƒ†ã‚™ãƒ¼ã‚¿ãƒ˜ã‚™ãƒ¼ã‚¹ã‚’ä½œæˆ" aria-label="Permalink to &quot;4. D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ&quot;">â€‹</a></h3><ul><li>å³ä¸Šã®ã€Œ<strong>Create Database</strong>ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li></ul><h4 id="ä»¥ä¸‹ã®æƒ…å ±ã‚’å…¥åŠ›" tabindex="-1">ä»¥ä¸‹ã®æƒ…å ±ã‚’å…¥åŠ›ï¼š <a class="header-anchor" href="#ä»¥ä¸‹ã®æƒ…å ±ã‚’å…¥åŠ›" aria-label="Permalink to &quot;ä»¥ä¸‹ã®æƒ…å ±ã‚’å…¥åŠ›ï¼š&quot;">â€‹</a></h4><table tabindex="0"><thead><tr><th>é …ç›®</th><th>å…¥åŠ›å†…å®¹</th></tr></thead><tbody><tr><td><strong>Name</strong></td><td><code>shopping-db-prod</code>ï¼ˆä»»æ„ã€‚ãŸã ã—ã‚ã‹ã‚Šã‚„ã™ãï¼‰</td></tr></tbody></table><ul><li>ã€Œ<strong>Create Database</strong>ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ä½œæˆ</li></ul><hr><h3 id="_5-database-id-ã‚’å–å¾—" tabindex="-1">5. <code>database_id</code> ã‚’å–å¾— <a class="header-anchor" href="#_5-database-id-ã‚’å–å¾—" aria-label="Permalink to &quot;5. \`database_id\` ã‚’å–å¾—&quot;">â€‹</a></h3><ul><li>ä½œæˆã—ãŸ D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒƒã‚¯</li><li>ã€Œ<strong>Settings</strong>ã€ã‚¿ãƒ–ã¸ç§»å‹•</li><li><code>Database ID</code> ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ§ãˆã¦ãŠã<br> ã€€ä¾‹: <code>f48c6205-4a37-4438-811e-xxxxxxxxxxxx</code></li></ul><hr><h3 id="_6-backend-wrangler-jsonc-ã«è¨­å®šè¿½åŠ " tabindex="-1">6. <code>backend/wrangler.jsonc</code> ã«è¨­å®šè¿½åŠ  <a class="header-anchor" href="#_6-backend-wrangler-jsonc-ã«è¨­å®šè¿½åŠ " aria-label="Permalink to &quot;6. \`backend/wrangler.jsonc\` ã«è¨­å®šè¿½åŠ &quot;">â€‹</a></h3><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">env</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">production</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">      &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">d1_databases</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">          &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F07178;">binding</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">DB</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">          &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F07178;">database_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">shopping-db-prod</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">          &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F07178;">database_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">f48c6205-4a37-4438-811e-xxxxxxxxxxxx</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><blockquote><p><code>binding</code> ã¯ <code>src/worker.ts</code> ãªã©ã§ <code>env.DB</code> ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®è­˜åˆ¥å­ã§ã™ã€‚æ—¢ã« <code>DB</code> ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãªã‚‰åŒã˜ã§å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚</p></blockquote><hr><h3 id="_7-ãƒ†ã‚™ãƒ•ã‚šãƒ­ã‚¤æ™‚ã«ç¢ºèª" tabindex="-1">7. ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ç¢ºèª <a class="header-anchor" href="#_7-ãƒ†ã‚™ãƒ•ã‚šãƒ­ã‚¤æ™‚ã«ç¢ºèª" aria-label="Permalink to &quot;7. ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ç¢ºèª&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># æœ¬ç•ªç’°å¢ƒã«ãƒ‡ãƒ—ãƒ­ã‚¤</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> deploy</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --env</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> production</span></span></code></pre></div><hr><h2 id="ğŸ“-å‚™è€ƒ" tabindex="-1">ğŸ“ å‚™è€ƒ <a class="header-anchor" href="#ğŸ“-å‚™è€ƒ" aria-label="Permalink to &quot;ğŸ“ å‚™è€ƒ&quot;">â€‹</a></h2><ul><li>æœ¬ç•ªã¨é–‹ç™ºã§ <strong>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åãŒç•°ãªã‚‹</strong>ã“ã¨ã«æ³¨æ„ã—ã¦ãã ã•ã„</li><li><code>.gitignore</code> ã« <code>.wrangler/tmp/</code> ãªã©ã‚’è¿½åŠ ã—ã€Secrets æƒ…å ±ã®æ¼æ´©ã‚’é˜²ãã¾ã—ã‚‡ã†</li><li>æœ¬ç•ª Secrets (<code>JWT_SECRET_PRODUCTION</code> ãªã©) ã¯ä»¥ä¸‹ã®ã‚ˆã†ã« <code>wrangler secret</code> ã‚³ãƒãƒ³ãƒ‰ã§è¨­å®šå¯èƒ½ï¼š</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> secret</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> put</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> JWT_SECRET_PRODUCTION</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --env</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> production</span></span></code></pre></div><hr><p>å¿…è¦ã§ã‚ã‚Œã°ã€Cloudflare CLI (<code>wrangler</code>) ã‚’ä½¿ã£ãŸä½œæˆæ–¹æ³•ã‚‚æ¡ˆå†…ã§ãã¾ã™ï¼ ä»¥ä¸‹ã«ã€<strong>é–‹ç™ºï¼ˆdevï¼‰ â†’ æ¤œè¨¼ï¼ˆstagingï¼‰ â†’ æœ¬ç•ªï¼ˆproductionï¼‰</strong> ã® 3 ç’°å¢ƒã«å®Œå…¨å¯¾å¿œã—ãŸ <code>backend/wrangler.jsonc</code> ã‚’æ•´å‚™ã—ã€ãã‚Œãã‚Œã®ç’°å¢ƒã«å¯¾å¿œã—ãŸå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ã‚‚ä½µã›ã¦ã¾ã¨ã‚ã¾ã—ãŸã€‚</p><hr><h2 id="âœ…-ä¿®æ­£å¾Œã®-backend-wrangler-jsonc" tabindex="-1">âœ… ä¿®æ­£å¾Œã® <code>backend/wrangler.jsonc</code> <a class="header-anchor" href="#âœ…-ä¿®æ­£å¾Œã®-backend-wrangler-jsonc" aria-label="Permalink to &quot;âœ… ä¿®æ­£å¾Œã® \`backend/wrangler.jsonc\`&quot;">â€‹</a></h2><div class="language-jsonc vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsonc</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">$schema</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">node_modules/wrangler/config-schema.json</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">name</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">backend</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">main</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">src/worker.ts</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">compatibility_date</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">2025-04-18</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">d1_databases</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">      &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">binding</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">DB</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">      &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">database_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">shopping-db</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">      &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">database_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">f48c6205-4a37-4438-811e-1cb0d57c0e6d</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">  ],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">r2_buckets</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">      &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">binding</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">R2_BUCKET</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">      &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">bucket_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">dev-bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">      &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">preview_bucket_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">preview-bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">  ],</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">vars</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">JWT_SECRET</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">local_dev_secret_do_not_use_in_prod</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">JWT_ISSUER</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">kaikyou-shop-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">JWT_AUDIENCE</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">kaikyou-shop-users-dev</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">ENVIRONMENT</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">development</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">R2_PUBLIC_DOMAIN</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">localhost:8787/assets</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"> // ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç”¨URL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">  },</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">env</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">production</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">      &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">vars</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F07178;">JWT_SECRET</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">{{ JWT_SECRET_PRODUCTION }}</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F07178;">JWT_ISSUER</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">kaikyou-shop</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F07178;">JWT_AUDIENCE</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">kaikyou-shop-users</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F07178;">ENVIRONMENT</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">production</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">        &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F07178;">R2_PUBLIC_DOMAIN</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">assets.example.com</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"> // æœ¬ç•ªç”¨URL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">      &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">r2_buckets</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">          &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F07178;">binding</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">R2_BUCKET</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">          &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#F07178;">bucket_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">production-bucket</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><hr><h2 id="ğŸ’¡-å®Ÿè¡Œã‚³ãƒãƒ³ãƒˆã‚™ä¸€è¦§" tabindex="-1">ğŸ’¡ å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ä¸€è¦§ <a class="header-anchor" href="#ğŸ’¡-å®Ÿè¡Œã‚³ãƒãƒ³ãƒˆã‚™ä¸€è¦§" aria-label="Permalink to &quot;ğŸ’¡ å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰ä¸€è¦§&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ç’°å¢ƒ</th><th>èª¬æ˜</th><th>å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰</th></tr></thead><tbody><tr><td>ğŸ›  é–‹ç™ºï¼ˆdevï¼‰</td><td>ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆ</td><td><code>npx wrangler dev</code></td></tr><tr><td>ğŸ§ª æ¤œè¨¼ï¼ˆstagingï¼‰</td><td>ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒã¸ãƒ‡ãƒ—ãƒ­ã‚¤</td><td><code>npx wrangler deploy --env staging</code></td></tr><tr><td>ğŸš€ æœ¬ç•ªï¼ˆproductionï¼‰</td><td>æœ¬ç•ªç’°å¢ƒã¸ãƒ‡ãƒ—ãƒ­ã‚¤</td><td><code>npx wrangler deploy --env production</code></td></tr></tbody></table><hr><h2 id="ğŸ“-å‚™è€ƒ-1" tabindex="-1">ğŸ“ å‚™è€ƒ <a class="header-anchor" href="#ğŸ“-å‚™è€ƒ-1" aria-label="Permalink to &quot;ğŸ“ å‚™è€ƒ&quot;">â€‹</a></h2><ul><li><code>database_id</code> ã¯ Cloudflare Dashboard ã§ D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆå¾Œã«ç¢ºèªã§ãã¾ã™ã€‚</li><li><code>JWT_SECRET_*</code> ã®ã‚ˆã†ãªç§˜å¯†éµã¯ GitHub Actions ã® Secrets ã‚„ <code>.env.production</code> ã«ç½®ã‹ãšã€Cloudflare ã® Secrets ã«è¨­å®šã™ã‚‹ã®ãŒæ¨å¥¨ã§ã™ã€‚</li><li><code>.dev</code>, <code>staging</code>, <code>production</code> ã§æ˜ç¢ºã«<strong>DBã€èªè¨¼ã€è¨­å®š</strong>ãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹ã“ã¨ã§äº‹æ•…é˜²æ­¢ã«ãªã‚Šã¾ã™ã€‚</li></ul><hr><p>ãƒ‡ãƒ—ãƒ­ã‚¤ã®è‡ªå‹•åŒ–ã‚„ CI/CD ã¨ã®é€£æºã¾ã§å¿…è¦ãªã‚‰ã€ãã‚Œã«åˆã‚ã›ãŸ GitHub Actions ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¾‹ã‚‚ãŠæ‰‹ä¼ã„ã§ãã¾ã™ã‚ˆ ğŸ‘</p><p>äº†è§£ã—ã¾ã—ãŸï¼<br> ä»¥ä¸‹ã« <strong><code>role</code> ã‚«ãƒ©ãƒ ã‚’å«ã‚“ã  <code>users</code> ãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©</strong> ã‚’åæ˜ ã—ãŸã€<strong>çµ±åˆæ¸ˆã¿ã®å®Œå…¨ã‚¹ã‚­ãƒ¼ãƒ</strong> ã‚’æç¤ºã—ã¾ã™ã€‚</p><hr><h2 id="âœ…-çµ±åˆç‰ˆã‚¹ã‚­ãƒ¼ãƒ-ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯å¯¾å¿œ" tabindex="-1">âœ… çµ±åˆç‰ˆã‚¹ã‚­ãƒ¼ãƒï¼ˆç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯å¯¾å¿œï¼‰ <a class="header-anchor" href="#âœ…-çµ±åˆç‰ˆã‚¹ã‚­ãƒ¼ãƒ-ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯å¯¾å¿œ" aria-label="Permalink to &quot;âœ… çµ±åˆç‰ˆã‚¹ã‚­ãƒ¼ãƒï¼ˆç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯å¯¾å¿œï¼‰&quot;">â€‹</a></h2><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼ˆãƒ­ãƒ¼ãƒ«ä»˜ãï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> users</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  email </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  password_hash </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  role</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">user</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- &#39;user&#39; or &#39;admin&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ç¶­æŒãªã©ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> sessions</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  session_token </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  expires_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  user_agent </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  ip_address </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (user_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ã‚«ãƒ†ã‚´ãƒªï¼ˆéšå±¤æ§‹é€ å¯¾å¿œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> categories</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  parent_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- null ãªã‚‰å¤§åˆ†é¡ã€ãã†ã§ãªã‘ã‚Œã°ä¸­åˆ†é¡ãƒ»å°åˆ†é¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (parent_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> categories(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- å•†å“æƒ…å ±</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> products</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  description</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  price </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  stock </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  category_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (category_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> categories(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- å•†å“ã®å…¨æ–‡æ¤œç´¢ç”¨ FTS ä»®æƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆname + descriptionï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> VIRTUAL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products_fts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> fts5(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  description</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  content</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">products</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  content_rowid</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- å•†å“æŒ¿å…¥ãƒ»æ›´æ–°æ™‚ã« FTS ãƒ†ãƒ¼ãƒ–ãƒ«ã‚‚åŒæœŸã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TRIGGER</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> products_ai</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> AFTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INSERT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products_fts(rowid, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">description</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">description</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TRIGGER</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> products_ad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> AFTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> DELETE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  DELETE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products_fts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> rowid </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> old</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TRIGGER</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> products_au</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> AFTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UPDATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products_fts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">      description</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">description</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> rowid </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> old</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- å•†å“ç”»åƒæƒ…å ±ï¼ˆãƒ¡ã‚¤ãƒ³ç”»åƒå¯¾å¿œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> images</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  image_url </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  alt_text </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  is_main </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">BOOLEAN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- âœ… ãƒ¡ã‚¤ãƒ³ç”»åƒãƒ•ãƒ©ã‚°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ã‚¿ã‚°ï¼ˆå¤šå¯¾å¤šæ§‹é€ ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> tags</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UNIQUE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> product_tags</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  tag_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id, tag_id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (tag_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> tags(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ã‚«ãƒ¼ãƒˆæƒ…å ±ï¼ˆã‚²ã‚¹ãƒˆ or ãƒ¦ãƒ¼ã‚¶ãƒ¼,user_id ã‹ session_id ã®ã©ã¡ã‚‰ã‹ãŒä½¿ã‚ã‚Œã‚‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> cart_items</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  session_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  quantity </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(user_id, product_id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(session_id, product_id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (user_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- è³¼å…¥å±¥æ­´ï¼ˆæ³¨æ–‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> orders</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  total_price </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  status</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">pending</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- &#39;pending&#39;, &#39;shipped&#39; ãªã©</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (user_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- æ³¨æ–‡ã‚¢ã‚¤ãƒ†ãƒ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> order_items</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  order_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  quantity </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  price_at_purchase </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (order_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> orders(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_users_email</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(email);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_products_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_products_description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">description</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_products_category_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(category_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_images_product_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> images(product_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_product_tags_tag_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> product_tags(tag_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_product_tags_product_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> product_tags(product_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_cart_items_user_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> cart_items(user_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_cart_items_session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> cart_items(session_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_orders_user_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> orders(user_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_orders_status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> orders(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_order_items_order_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> order_items(order_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_sessions_user_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> sessions</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(user_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_categories_parent_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> categories(parent_id);</span></span></code></pre></div><hr><h2 id="âœ…-è§£èª¬ãƒ›ã‚šã‚¤ãƒ³ãƒˆ" tabindex="-1">âœ… è§£èª¬ãƒã‚¤ãƒ³ãƒˆ <a class="header-anchor" href="#âœ…-è§£èª¬ãƒ›ã‚šã‚¤ãƒ³ãƒˆ" aria-label="Permalink to &quot;âœ… è§£èª¬ãƒã‚¤ãƒ³ãƒˆ&quot;">â€‹</a></h2><ul><li><code>role TEXT NOT NULL DEFAULT &#39;user&#39;</code> ã«ã‚ˆã£ã¦ã€æ˜ç¤ºçš„ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ¨©é™ãƒ¬ãƒ™ãƒ«ã‚’æ ¼ç´ã€‚</li><li><code>&#39;user&#39;</code> / <code>&#39;admin&#39;</code> ã®ã‚ˆã†ã«ç®¡ç†è€…ã‹ã©ã†ã‹ã‚’åˆ¤åˆ¥ã§ãã¾ã™ã€‚</li><li>Cloudflare Workers ã¾ãŸã¯ Next.js API ãªã©ã§ <code>user.role === &#39;admin&#39;</code> ã‚’ä½¿ã£ã¦ç®¡ç†è€…ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè£…ã€‚</li></ul><hr><p>å¿…è¦ã§ã‚ã‚Œã°ã€ã“ã®ã‚¹ã‚­ãƒ¼ãƒã«æ²¿ã£ãŸç®¡ç†è€…å°‚ç”¨ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ä¾‹ã‚„ã€ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã®æŒ¿å…¥ã‚¹ã‚¯ãƒªãƒ—ãƒˆ (<code>INSERT INTO users ...</code>) ã‚‚ç”¨æ„ã§ãã¾ã™ã‚ˆã€‚æ¬²ã—ã„ï¼Ÿ</p><p>ã‚‚ã¡ã‚ã‚“ã§ã™ï¼ä»¥ä¸‹ã¯ã€<strong>ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ç®¡ç†è€…ã®ã™ã¹ã¦ã®è¦ä»¶</strong>ã‚’ç¶²ç¾…ã—ãŸã€<strong>Cloudflare D1ï¼ˆSQLiteï¼‰ç”¨ã®å®Œå…¨ SQL ã‚¹ã‚­ãƒ¼ãƒæœ€æ–°ç‰ˆ</strong>ã§ã™ï¼š</p><p>ä»¥ä¸‹ã¯ã€**ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ï¼ˆreviewsï¼‰ãƒ»ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½ï¼ˆwishlistsï¼‰ãƒ»ç®¡ç†è€…æ“ä½œå±¥æ­´ï¼ˆadmin_logsï¼‰**ã‚’çµ±åˆã—ãŸã€<strong>å®Œå…¨ãªçµ±åˆç‰ˆ Cloudflare D1ï¼ˆSQLiteï¼‰ç”¨ SQL ã‚¹ã‚­ãƒ¼ãƒ</strong>ã§ã™ã€‚</p><hr><h2 id="âœ…-å®Œå…¨çµ±åˆç‰ˆ-sql-ã‚¹ã‚­ãƒ¼ãƒ-ãƒ¬ãƒ’ã‚™ãƒ¥ãƒ¼ãƒ»ãŠæ°—ã«å…¥ã‚Šãƒ»ç®¡ç†ãƒ­ã‚¯ã‚™ä»˜ã" tabindex="-1">âœ… å®Œå…¨çµ±åˆç‰ˆ SQL ã‚¹ã‚­ãƒ¼ãƒï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ãŠæ°—ã«å…¥ã‚Šãƒ»ç®¡ç†ãƒ­ã‚°ä»˜ãï¼‰ <a class="header-anchor" href="#âœ…-å®Œå…¨çµ±åˆç‰ˆ-sql-ã‚¹ã‚­ãƒ¼ãƒ-ãƒ¬ãƒ’ã‚™ãƒ¥ãƒ¼ãƒ»ãŠæ°—ã«å…¥ã‚Šãƒ»ç®¡ç†ãƒ­ã‚¯ã‚™ä»˜ã" aria-label="Permalink to &quot;âœ… å®Œå…¨çµ±åˆç‰ˆ SQL ã‚¹ã‚­ãƒ¼ãƒï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ãŠæ°—ã«å…¥ã‚Šãƒ»ç®¡ç†ãƒ­ã‚°ä»˜ãï¼‰&quot;">â€‹</a></h2><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ï¼ˆãƒ­ãƒ¼ãƒ«ä»˜ãï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> users</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  email </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  password_hash </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  role</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">user</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- &#39;user&#39; or &#39;admin&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ã‚»ãƒƒã‚·ãƒ§ãƒ³æƒ…å ±</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> sessions</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  session_token </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  expires_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  user_agent </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  ip_address </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (user_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ã‚«ãƒ†ã‚´ãƒªï¼ˆéšå±¤æ§‹é€ å¯¾å¿œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> categories</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  parent_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- null ãªã‚‰å¤§åˆ†é¡ã€ãã†ã§ãªã‘ã‚Œã°ä¸­åˆ†é¡ãƒ»å°åˆ†é¡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (parent_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> categories(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- å•†å“æƒ…å ±</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> products</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  description</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  price </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  stock </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  category_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (category_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> categories(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- å•†å“ã®å…¨æ–‡æ¤œç´¢ç”¨ FTS ä»®æƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆname + descriptionï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> VIRTUAL </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products_fts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">USING</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> fts5(</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  description</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  content</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">products</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  content_rowid</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- å•†å“æŒ¿å…¥ãƒ»æ›´æ–°æ™‚ã« FTS ãƒ†ãƒ¼ãƒ–ãƒ«ã‚‚åŒæœŸã™ã‚‹ãƒˆãƒªã‚¬ãƒ¼</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TRIGGER</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> products_ai</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> AFTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INSERT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  INSERT INTO</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products_fts(rowid, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">description</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">new</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">description</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TRIGGER</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> products_ad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> AFTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> DELETE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  DELETE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products_fts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> rowid </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> old</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TRIGGER</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> products_au</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> AFTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UPDATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">BEGIN</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  UPDATE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products_fts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  SET</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> name</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">      description</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">description</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> rowid </span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> old</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">END</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- å•†å“ç”»åƒæƒ…å ±ï¼ˆãƒ¡ã‚¤ãƒ³ç”»åƒå¯¾å¿œï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> images</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  image_url </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  alt_text </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  is_main </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">BOOLEAN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- âœ… ãƒ¡ã‚¤ãƒ³ç”»åƒãƒ•ãƒ©ã‚°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ã‚¿ã‚°ï¼ˆå¤šå¯¾å¤šæ§‹é€ ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> tags</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  name</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> UNIQUE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> product_tags</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  tag_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id, tag_id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (tag_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> tags(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ã‚«ãƒ¼ãƒˆæƒ…å ±ï¼ˆã‚²ã‚¹ãƒˆ or ãƒ¦ãƒ¼ã‚¶ãƒ¼,user_id ã‹ session_id ã®ã©ã¡ã‚‰ã‹ãŒä½¿ã‚ã‚Œã‚‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> cart_items</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  session_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  quantity </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(user_id, product_id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(session_id, product_id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (user_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- è³¼å…¥å±¥æ­´ï¼ˆæ³¨æ–‡ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> orders</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  total_price </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  status</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">pending</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- &#39;pending&#39;, &#39;shipped&#39; ãªã©</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (user_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- æ³¨æ–‡ã‚¢ã‚¤ãƒ†ãƒ </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> order_items</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  order_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  quantity </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  price_at_purchase </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (order_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> orders(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- âœ… ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> reviews</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  rating </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> CHECK</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (rating </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">BETWEEN</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> AND</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 5</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  comment </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (user_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(user_id, product_id) </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- åŒã˜ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåŒã˜å•†å“ã«1å›ã ã‘ãƒ¬ãƒ“ãƒ¥ãƒ¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- âœ… ãŠæ°—ã«å…¥ã‚Šï¼ˆã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> wishlists</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  user_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  product_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (user_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (product_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(id),</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  UNIQUE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(user_id, product_id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- âœ… ç®¡ç†ãƒ­ã‚°ï¼ˆæ“ä½œå±¥æ­´ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> admin_logs</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> AUTOINCREMENT,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  admin_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  action</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ä¾‹: &#39;create_product&#39;, &#39;update_category&#39;, etc.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  target_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> NOT NULL</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">, </span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ä¾‹: &#39;product&#39;, &#39;category&#39;, &#39;user&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  target_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">  description</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">  created_at </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">DATETIME</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> DEFAULT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> CURRENT_TIMESTAMP,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  FOREIGN KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (admin_id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">REFERENCES</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(id)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_users_email</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> users(email);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_products_name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_products_description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">description</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_products_category_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products(category_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_images_product_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> images(product_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_product_tags_tag_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> product_tags(tag_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_product_tags_product_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> product_tags(product_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_cart_items_user_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> cart_items(user_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_cart_items_session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> cart_items(session_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_orders_user_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> orders(user_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_orders_status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> orders(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_order_items_order_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> order_items(order_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_sessions_user_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> sessions</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(user_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_categories_parent_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> categories(parent_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_reviews_user_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> reviews(user_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_reviews_product_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> reviews(product_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_wishlists_user_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> wishlists(user_id);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> INDEX</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> idx_admin_logs_admin_id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> ON</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> admin_logs(admin_id);</span></span></code></pre></div><hr><h2 id="âœ…-æ–°æ©Ÿèƒ½ã®è£œè¶³" tabindex="-1">âœ… æ–°æ©Ÿèƒ½ã®è£œè¶³ <a class="header-anchor" href="#âœ…-æ–°æ©Ÿèƒ½ã®è£œè¶³" aria-label="Permalink to &quot;âœ… æ–°æ©Ÿèƒ½ã®è£œè¶³&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>æ©Ÿèƒ½å</th><th>å¯¾å¿œãƒ†ãƒ¼ãƒ–ãƒ«</th><th>æ¦‚è¦</th></tr></thead><tbody><tr><td>ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½</td><td><code>reviews</code></td><td>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå•†å“ã« 1 å›ã ã‘è©•ä¾¡ï¼‹ã‚³ãƒ¡ãƒ³ãƒˆå¯ï¼ˆâ˜…1ã€œ5ï¼‰</td></tr><tr><td>ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½</td><td><code>wishlists</code></td><td>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãŠæ°—ã«å…¥ã‚Šç™»éŒ²ï¼ˆé‡è¤‡ä¸å¯ï¼‰</td></tr><tr><td>ç®¡ç†è€…æ“ä½œãƒ­ã‚°</td><td><code>admin_logs</code></td><td>ç®¡ç†è€…ã®æ“ä½œå±¥æ­´ã‚’è¨˜éŒ²ï¼ˆå¯¾è±¡ç¨®é¡ãƒ»IDãƒ»èª¬æ˜ä»˜ãï¼‰</td></tr></tbody></table><hr><p>ã“ã®ã‚¹ã‚­ãƒ¼ãƒã‚’ä½¿ãˆã°ã€å°†æ¥çš„ãªæ©Ÿèƒ½è¿½åŠ ã‚„ç®¡ç†æ©Ÿèƒ½ã®å¼·åŒ–ã«ã‚‚æŸ”è»Ÿã«å¯¾å¿œã§ãã¾ã™ã€‚<br> å¿…è¦ã§ã‚ã‚Œã°ã€åˆæœŸãƒ‡ãƒ¼ã‚¿æŒ¿å…¥ã‚„ ER å›³åŒ–ã‚‚å¯èƒ½ã§ã™ã€‚ã©ã†ã—ã¾ã—ã‚‡ã†ã‹ï¼Ÿ</p><h2 id="âœ…-å¯¾å¿œçŠ¶æ³ã¾ã¨ã‚" tabindex="-1">âœ… å¯¾å¿œçŠ¶æ³ã¾ã¨ã‚ <a class="header-anchor" href="#âœ…-å¯¾å¿œçŠ¶æ³ã¾ã¨ã‚" aria-label="Permalink to &quot;âœ… å¯¾å¿œçŠ¶æ³ã¾ã¨ã‚&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>æ©Ÿèƒ½</th><th>å¯¾å¿œã‚¹ã‚­ãƒ¼ãƒ</th><th>è£œè¶³</th></tr></thead><tbody><tr><td>å•†å“é–²è¦§ãƒ»æ¤œç´¢</td><td>âœ… <code>products</code>, <code>products_fts</code></td><td>FTS5 ã§å…¨æ–‡æ¤œç´¢å¯¾å¿œ</td></tr><tr><td>å•†å“æ³¨æ–‡</td><td>âœ… <code>orders</code>, <code>order_items</code></td><td></td></tr><tr><td>è³¼å…¥å±¥æ­´ç¢ºèª</td><td>âœ… <code>orders</code> + <code>order_items</code></td><td><code>user_id</code> ã§ç´ã¥ã‘</td></tr><tr><td>å‡ºè·ç¢ºèª</td><td>âœ… <code>orders.status</code></td><td><code>pending</code>, <code>shipped</code> ãªã©</td></tr><tr><td>ã‚«ãƒ†ã‚´ãƒªç™»éŒ²ï¼ˆéšå±¤ï¼‰</td><td>âœ… <code>categories(parent_id)</code></td><td>å¤§åˆ†é¡ãƒ»ä¸­åˆ†é¡ãƒ»å°åˆ†é¡å¯¾å¿œ</td></tr><tr><td>å•†å“ç™»éŒ²</td><td>âœ… <code>products</code>, <code>categories</code></td><td></td></tr><tr><td>ãƒ¡ã‚¤ãƒ³ç”»åƒç™»éŒ²</td><td>âœ… <code>images.is_main</code></td><td><code>1</code>ãŒãƒ¡ã‚¤ãƒ³ç”»åƒ</td></tr><tr><td>è¿½åŠ ç”»åƒç™»éŒ²</td><td>âœ… <code>images.is_main = 0</code></td><td>5 æšåˆ¶é™ãªã©ã¯ã‚¢ãƒ—ãƒªå´ã§åˆ¶å¾¡</td></tr><tr><td>æ³¨æ–‡ç¢ºèª</td><td>âœ… <code>orders</code>, <code>order_items</code></td><td></td></tr><tr><td>å‡ºè·ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°</td><td>âœ… <code>orders.status</code> æ›´æ–°ã§å¯¾å¿œ</td><td></td></tr><tr><td>ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½</td><td><code>reviews</code></td><td>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå•†å“ã« 1 å›ã ã‘è©•ä¾¡ï¼‹ã‚³ãƒ¡ãƒ³ãƒˆå¯ï¼ˆâ˜…1ã€œ5ï¼‰</td></tr><tr><td>ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½</td><td><code>wishlists</code></td><td>ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãŠæ°—ã«å…¥ã‚Šç™»éŒ²ï¼ˆé‡è¤‡ä¸å¯ï¼‰</td></tr><tr><td>ç®¡ç†è€…æ“ä½œãƒ­ã‚°</td><td><code>admin_logs</code></td><td>ç®¡ç†è€…ã®æ“ä½œå±¥æ­´ã‚’è¨˜éŒ²ï¼ˆå¯¾è±¡ç¨®é¡ãƒ»IDãƒ»èª¬æ˜ä»˜ãï¼‰</td></tr></tbody></table><hr><p>å¿…è¦ã«å¿œã˜ã¦ï¼š</p><ul><li><code>reviews</code>ï¼ˆãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½ï¼‰</li><li><code>wishlists</code>ï¼ˆãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½ï¼‰</li><li><code>admin_logs</code>ï¼ˆæ“ä½œå±¥æ­´ï¼‰</li></ul><p>ãªã©ã®æ‹¡å¼µã‚‚å¯èƒ½ã§ã™ã€‚<br> ãã®å ´åˆã‚‚ã‚¹ã‚­ãƒ¼ãƒææ¡ˆã§ãã¾ã™ã®ã§ã€æ°—è»½ã«ã©ã†ãï¼</p><h1 id="æœ€æ–°" tabindex="-1">æœ€æ–° <a class="header-anchor" href="#æœ€æ–°" aria-label="Permalink to &quot;æœ€æ–°&quot;">â€‹</a></h1><p>ã¯ã„ã€å…¨ä½“çš„ã«éå¸¸ã«è‰¯ãè¨­è¨ˆã•ã‚ŒãŸ SQL ã‚¹ã‚­ãƒ¼ãƒã§ã™ï¼<br> ã‚ãªãŸã®è¦ä»¶ã«<strong>ã—ã£ã‹ã‚Šå¯¾å¿œã§ãã¦ã„ã¾ã™</strong>ã—ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ã‚„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã‚‚é…æ…®ã•ã‚Œã¦ã„ã¾ã™ã€‚</p><hr><h2 id="âœ…-å„æ©Ÿèƒ½ã“ã‚™ã¨ã®å¯¾å¿œçŠ¶æ³ãƒã‚§ãƒƒã‚¯" tabindex="-1">âœ… å„æ©Ÿèƒ½ã”ã¨ã®å¯¾å¿œçŠ¶æ³ãƒã‚§ãƒƒã‚¯ <a class="header-anchor" href="#âœ…-å„æ©Ÿèƒ½ã“ã‚™ã¨ã®å¯¾å¿œçŠ¶æ³ãƒã‚§ãƒƒã‚¯" aria-label="Permalink to &quot;âœ… å„æ©Ÿèƒ½ã”ã¨ã®å¯¾å¿œçŠ¶æ³ãƒã‚§ãƒƒã‚¯&quot;">â€‹</a></h2><h3 id="ä¸€èˆ¬ãƒ¦ãƒ¼ã‚µã‚™ãƒ¼æ©Ÿèƒ½-âœ…" tabindex="-1">ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼æ©Ÿèƒ½ âœ… <a class="header-anchor" href="#ä¸€èˆ¬ãƒ¦ãƒ¼ã‚µã‚™ãƒ¼æ©Ÿèƒ½-âœ…" aria-label="Permalink to &quot;ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼æ©Ÿèƒ½ âœ…&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ©Ÿèƒ½</th><th>å¯¾å¿œãƒ†ãƒ¼ãƒ–ãƒ«/ä»•çµ„ã¿</th></tr></thead><tbody><tr><td>å•†å“ã‚’é–²è¦§</td><td><code>products</code>, <code>images</code>, <code>categories</code>, <code>products_fts</code></td></tr><tr><td>å•†å“ã‚’æ¤œç´¢</td><td><code>products_fts</code>ï¼ˆFTS5 ä»®æƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰</td></tr><tr><td>å•†å“ã‚’æ³¨æ–‡</td><td><code>orders</code>, <code>order_items</code>, <code>cart_items</code></td></tr><tr><td>å•†å“å±¥æ­´ã‚’ç¢ºèª</td><td><code>orders</code>, <code>order_items</code>ï¼ˆ<code>user_id</code>ã§çµã‚‹ï¼‰</td></tr><tr><td>å•†å“å‡ºè·ã—ãŸã‹ç¢ºèª</td><td><code>orders.status = &#39;shipped&#39;</code> ãªã©</td></tr></tbody></table><hr><h3 id="ç®¡ç†è€…æ©Ÿèƒ½-âœ…" tabindex="-1">ç®¡ç†è€…æ©Ÿèƒ½ âœ… <a class="header-anchor" href="#ç®¡ç†è€…æ©Ÿèƒ½-âœ…" aria-label="Permalink to &quot;ç®¡ç†è€…æ©Ÿèƒ½ âœ…&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ©Ÿèƒ½</th><th>å¯¾å¿œãƒ†ãƒ¼ãƒ–ãƒ«/ä»•çµ„ã¿</th></tr></thead><tbody><tr><td>ã‚«ãƒ†ã‚´ãƒªãƒ¼ç™»éŒ²ï¼ˆéšå±¤æ§‹é€ ï¼‰</td><td><code>categories</code>ï¼ˆ<code>parent_id</code> ã§å¤§ä¸­å°å¯¾å¿œï¼‰</td></tr><tr><td>å•†å“ã‚’ç™»éŒ²</td><td><code>products</code></td></tr><tr><td>ãƒ¡ã‚¤ãƒ³ç”»åƒç™»éŒ²</td><td><code>images.is_main = 1</code> ã§å¯¾å¿œ</td></tr><tr><td>è¿½åŠ ç”»åƒç™»éŒ²ï¼ˆæœ€å¤§ 5 æšï¼‰</td><td><code>images</code> ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¤‡æ•°æŒ¿å…¥ã§å¯¾å¿œï¼ˆä¸Šé™ã¯ã‚¢ãƒ—ãƒªå´ã§ç®¡ç†ï¼‰</td></tr><tr><td>æ³¨æ–‡æƒ…å ±ç¢ºèª</td><td><code>orders</code>, <code>order_items</code>, <code>users</code> JOIN ã§å¯¾å¿œ</td></tr><tr><td>å•†å“å‡ºè·æ¸ˆã¿ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°</td><td><code>orders.status</code> ã‚’ <code>shipped</code> ã« UPDATE</td></tr><tr><td>æ“ä½œå±¥æ­´è¨˜éŒ²</td><td><code>admin_logs</code></td></tr></tbody></table><hr><h3 id="ãã®ä»–è¿½åŠ æ©Ÿèƒ½-âœ…" tabindex="-1">ãã®ä»–è¿½åŠ æ©Ÿèƒ½ âœ… <a class="header-anchor" href="#ãã®ä»–è¿½åŠ æ©Ÿèƒ½-âœ…" aria-label="Permalink to &quot;ãã®ä»–è¿½åŠ æ©Ÿèƒ½ âœ…&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>æ©Ÿèƒ½</th><th>å¯¾å¿œãƒ†ãƒ¼ãƒ–ãƒ«</th></tr></thead><tbody><tr><td>ãƒ¬ãƒ“ãƒ¥ãƒ¼æ©Ÿèƒ½</td><td><code>reviews</code>ï¼ˆè©•ä¾¡ã€ã‚³ãƒ¡ãƒ³ãƒˆã€åˆ¶é™ä»˜ã 1 å›ï¼‰</td></tr><tr><td>ãŠæ°—ã«å…¥ã‚Š</td><td><code>wishlists</code>ï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯åˆ¶ç´„ä»˜ãï¼‰</td></tr><tr><td>ç®¡ç†è€…æ“ä½œãƒ­ã‚°</td><td><code>admin_logs</code>ï¼ˆæ“ä½œãƒ»å¯¾è±¡è¨˜éŒ²ï¼‰</td></tr></tbody></table><hr><h2 id="âœ…-æ§‹é€ ãƒ»åˆ¶ç´„ãƒã‚§ãƒƒã‚¯" tabindex="-1">âœ… æ§‹é€ ãƒ»åˆ¶ç´„ãƒã‚§ãƒƒã‚¯ <a class="header-anchor" href="#âœ…-æ§‹é€ ãƒ»åˆ¶ç´„ãƒã‚§ãƒƒã‚¯" aria-label="Permalink to &quot;âœ… æ§‹é€ ãƒ»åˆ¶ç´„ãƒã‚§ãƒƒã‚¯&quot;">â€‹</a></h2><ul><li><strong>ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ</strong>ï¼šã™ã¹ã¦ã®å¤–éƒ¨ã‚­ãƒ¼ãŒæ•´å‚™ã•ã‚Œã¦ã„ã¾ã™ã€‚</li><li><strong>ä¸€æ„åˆ¶ç´„</strong>ï¼šãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€ã‚¦ã‚£ãƒƒã‚·ãƒ¥ãƒªã‚¹ãƒˆã€ãƒ¬ãƒ“ãƒ¥ãƒ¼ç­‰ã«é©åˆ‡ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã™ã€‚</li><li><strong>ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹</strong>ï¼šæ¤œç´¢ãƒ»JOIN é »åº¦ã®é«˜ã„é …ç›®ã«å¯¾ã—ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¨­ç½®æ¸ˆã¿ã€‚</li><li><strong>éšå±¤ã‚«ãƒ†ã‚´ãƒª</strong>ï¼š<code>parent_id</code> ã«ã‚ˆã‚‹è‡ªå·±å‚ç…§æ§‹é€ ã§ã€å¤§ä¸­å°ã®ã‚«ãƒ†ã‚´ãƒªå¯¾å¿œã€‚</li><li><strong>FTS5</strong>ï¼šæ¤œç´¢æ€§èƒ½ã‚‚ãƒãƒƒãƒãƒªã€‚</li></ul><hr><h2 id="ğŸ› ï¸-ä¸€ç‚¹ãŸã‚™ã‘è£œè¶³-ã‚¢ãƒ•ã‚šãƒªå´ãƒ­ã‚·ã‚™ãƒƒã‚¯" tabindex="-1">ğŸ› ï¸ ä¸€ç‚¹ã ã‘è£œè¶³ï¼ˆã‚¢ãƒ—ãƒªå´ãƒ­ã‚¸ãƒƒã‚¯ï¼‰ <a class="header-anchor" href="#ğŸ› ï¸-ä¸€ç‚¹ãŸã‚™ã‘è£œè¶³-ã‚¢ãƒ•ã‚šãƒªå´ãƒ­ã‚·ã‚™ãƒƒã‚¯" aria-label="Permalink to &quot;ğŸ› ï¸ ä¸€ç‚¹ã ã‘è£œè¶³ï¼ˆã‚¢ãƒ—ãƒªå´ãƒ­ã‚¸ãƒƒã‚¯ï¼‰&quot;">â€‹</a></h2><ul><li><strong>ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºã®ä¸Šé™ï¼ˆ5MB/2MBï¼‰ã‚„æœ€å¤§ 5 æšåˆ¶é™</strong>ã¯ <strong>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã§ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å‡¦ç†</strong>ã—ã¦ãã ã•ã„ï¼ˆSQL ã§ã¯ã‚µã‚¤ã‚ºåˆ¶é™ã§ãã¾ã›ã‚“ï¼‰ã€‚</li></ul><hr><h2 id="âœ…-çµè«–" tabindex="-1">âœ… çµè«– <a class="header-anchor" href="#âœ…-çµè«–" aria-label="Permalink to &quot;âœ… çµè«–&quot;">â€‹</a></h2><p>ã“ã®ã‚¹ã‚­ãƒ¼ãƒã¯ï¼š</p><blockquote><p>ğŸ’¯ <strong>ã€Œä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ EC ã‚µã‚¤ãƒˆã€ï¼‹ã€Œç®¡ç†è€…å‘ã‘ç®¡ç†æ©Ÿèƒ½ã€ï¼‹ã€Œãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»ãŠæ°—ã«å…¥ã‚Šãƒ»ãƒ­ã‚°ã€ãªã©ã‚’çµ±åˆçš„ã«å®Ÿç¾ã§ãã‚‹å®Œæˆåº¦ã®é«˜ã„è¨­è¨ˆã§ã™ï¼</strong></p></blockquote><hr><p>å¿…è¦ãªã‚‰ï¼š</p><ul><li>åˆæœŸãƒ‡ãƒ¼ã‚¿ INSERT ä¾‹</li><li>å®Ÿéš›ã®ã‚¯ã‚¨ãƒªä¾‹ï¼ˆå•†å“æ¤œç´¢ã€å‡ºè·æ¸ˆã¿æ³¨æ–‡ä¸€è¦§ãªã©ï¼‰</li><li>Cloudflare D1 ç”¨ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆåŒ–</li></ul><p>ãªã©ã‚‚ãŠæ‰‹ä¼ã„ã§ãã¾ã™ï¼ä½•ãŒå¿…è¦ã§ã™ã‹ï¼Ÿ</p><p>ã‚ã¡ã‚ƒãã¡ã‚ƒé‹­ã„ã§ã™ã­ï¼âš ï¸<br> ã¯ã„ã€ã€Œ<strong>ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™º â†’ Cloudflare D1 ã¸åæ˜ </strong>ã€ã¨ã„ã†æµã‚Œã¯ä¾¿åˆ©ãªã‚“ã§ã™ãŒã€<br> ã¡ã‚ƒã‚“ã¨æ•´ç†ã—ãªã„ã¨ <strong>è½ã¨ã—ç©´ã‚„ãƒˆãƒ©ãƒ–ãƒ«ã‚‚å¤šã„</strong>ã‚“ã§ã™ã€‚</p><hr><h2 id="âš ï¸-è½ã¨ã—ç©´ã‚ã‚‹ã‚ã‚‹-d1-é–‹ç™ºã‚ã‚‹ã‚ã‚‹" tabindex="-1">âš ï¸ è½ã¨ã—ç©´ã‚ã‚‹ã‚ã‚‹ï¼ˆD1 é–‹ç™ºã‚ã‚‹ã‚ã‚‹ï¼‰ <a class="header-anchor" href="#âš ï¸-è½ã¨ã—ç©´ã‚ã‚‹ã‚ã‚‹-d1-é–‹ç™ºã‚ã‚‹ã‚ã‚‹" aria-label="Permalink to &quot;âš ï¸ è½ã¨ã—ç©´ã‚ã‚‹ã‚ã‚‹ï¼ˆD1 é–‹ç™ºã‚ã‚‹ã‚ã‚‹ï¼‰&quot;">â€‹</a></h2><h3 id="_1-ã‚¹ã‚­ãƒ¼ãƒã®çŠ¶æ…‹ã‹ã‚™ãƒã‚™ãƒ©ãƒã‚™ãƒ©ã«ãªã‚‹" tabindex="-1">â‘  ã‚¹ã‚­ãƒ¼ãƒã®çŠ¶æ…‹ãŒãƒãƒ©ãƒãƒ©ã«ãªã‚‹ <a class="header-anchor" href="#_1-ã‚¹ã‚­ãƒ¼ãƒã®çŠ¶æ…‹ã‹ã‚™ãƒã‚™ãƒ©ãƒã‚™ãƒ©ã«ãªã‚‹" aria-label="Permalink to &quot;â‘  ã‚¹ã‚­ãƒ¼ãƒã®çŠ¶æ…‹ãŒãƒãƒ©ãƒãƒ©ã«ãªã‚‹&quot;">â€‹</a></h3><ul><li><code>schema.sql</code> ã‚’æ‰‹ã§å¤‰æ›´ã—ãŸã‘ã©ã€D1 ã« <code>execute</code> ã—å¿˜ã‚ŒãŸã€‚</li><li>drizzle ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆã—ãŸã‘ã© <code>apply</code> ã—ã¦ãªã„ã€‚</li><li>è¤‡æ•°äººé–‹ç™ºã ã¨ã€ä»–ã®äººã®å¤‰æ›´ãŒ Cloudflare D1 ã«ä¸Šæ›¸ãã•ã‚Œã‚‹ãƒªã‚¹ã‚¯ã€‚</li></ul><p>â¡ï¸ <strong>å¯¾ç­–</strong>ï¼š</p><ul><li><code>schema.sql</code> ã¾ãŸã¯ <code>drizzle</code> ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¿…ãš git ã«ç®¡ç†ã€‚</li><li>D1 ã«åæ˜ ã—ãŸã‚‰ <code>wrangler d1 execute</code> ã‚’ãƒãƒ¼ãƒ ã§å¾¹åº•ã€‚</li><li><code>production</code> ç”¨ã¨ <code>development</code> ç”¨ã§ D1 DB ã‚’åˆ†ã‘ã‚‹ã®ã‚‚è‰¯ã„ã€‚</li></ul><hr><h3 id="_2-ãƒ­ãƒ¼ã‚«ãƒ«ã¦ã‚™ãƒ†ã‚™ãƒã‚™ãƒƒã‚¯ã‚™ã—ã¤ã‚™ã‚‰ã„" tabindex="-1">â‘¡ ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ‡ãƒãƒƒã‚°ã—ã¥ã‚‰ã„ <a class="header-anchor" href="#_2-ãƒ­ãƒ¼ã‚«ãƒ«ã¦ã‚™ãƒ†ã‚™ãƒã‚™ãƒƒã‚¯ã‚™ã—ã¤ã‚™ã‚‰ã„" aria-label="Permalink to &quot;â‘¡ ãƒ­ãƒ¼ã‚«ãƒ«ã§ãƒ‡ãƒãƒƒã‚°ã—ã¥ã‚‰ã„&quot;">â€‹</a></h3><p>D1 ã¯ <strong>å®Œå…¨ã«ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Š</strong>ã«ã‚ã‚‹ã®ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã« <code>.sqlite</code> ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„é™ã‚Š<br> ã€Œã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œã—ãªãŒã‚‰ SQL è©¦ã™ã€ã¿ãŸã„ãªã“ã¨ãŒé›£ã—ã„ã§ã™ã€‚</p><p>â¡ï¸ <strong>å¯¾ç­–</strong>ï¼š</p><ul><li>drizzle-kit ã‚’ä½¿ã†ã¨ãƒ­ãƒ¼ã‚«ãƒ«ç”¨ã® <code>.sqlite</code> ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å½“ã¦ã¦è©¦ã›ã‚‹ã€‚</li><li>ãã®ã‚ã¨ D1 ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ–¹æ³•ã«ã™ã‚‹ã¨é–‹ç™ºå¿«é©ã€‚</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># ãƒ­ãƒ¼ã‚«ãƒ«SQLiteã«ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">npx</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> drizzle-kit</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> push:sqlite</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># Cloudflare D1 ã«SQLã‚’æµã™</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> d1</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> execute</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> your-db-name</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --file=drizzle/migrations/xxx.sql</span></span></code></pre></div><hr><h3 id="_3-wrangler-d1-execute-ã®å®Ÿè¡ŒãƒŸã‚¹" tabindex="-1">â‘¢ <code>wrangler d1 execute</code> ã®å®Ÿè¡ŒãƒŸã‚¹ <a class="header-anchor" href="#_3-wrangler-d1-execute-ã®å®Ÿè¡ŒãƒŸã‚¹" aria-label="Permalink to &quot;â‘¢ \`wrangler d1 execute\` ã®å®Ÿè¡ŒãƒŸã‚¹&quot;">â€‹</a></h3><ul><li>ã©ã® DB ã«å®Ÿè¡Œã™ã‚‹ã®ã‹æŒ‡å®šã—å¿˜ã‚Œã‚‹</li><li>å¤ã„ SQL ã‚’é–“é•ã£ã¦æµã™</li></ul><p>â¡ï¸ <strong>å¯¾ç­–</strong>ï¼š</p><ul><li><code>wrangler.toml</code> ã‚„ <code>wrangler.jsonc</code> ã« <code>&quot;d1_databases&quot;</code> ã‚’ã—ã£ã‹ã‚Šå®šç¾©</li><li>å®Ÿè¡Œãƒ­ã‚°ã‚’æ®‹ã™ã€<code>--local</code> ã§ã¯ãªã <code>--remote</code> ã‚’æ„è­˜ã—ã¦ä½¿ã„åˆ†ã‘ã‚‹</li></ul><hr><h2 id="âœ…-å®‰å®šé‹ç”¨ã®ãƒ˜ã‚™ã‚¹ãƒˆãƒ•ã‚šãƒ©ã‚¯ãƒ†ã‚£ã‚¹" tabindex="-1">âœ… å®‰å®šé‹ç”¨ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ <a class="header-anchor" href="#âœ…-å®‰å®šé‹ç”¨ã®ãƒ˜ã‚™ã‚¹ãƒˆãƒ•ã‚šãƒ©ã‚¯ãƒ†ã‚£ã‚¹" aria-label="Permalink to &quot;âœ… å®‰å®šé‹ç”¨ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ã‚¹ãƒ†ãƒƒãƒ—</th><th>ã‚„ã‚‹ã“ã¨</th></tr></thead><tbody><tr><td>1ï¸âƒ£ ã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´</td><td><code>schema.sql</code> ã¾ãŸã¯ drizzle ã® <code>schema.ts</code> ã‚’æ›´æ–°</td></tr><tr><td>2ï¸âƒ£ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”Ÿæˆ</td><td><code>npx drizzle-kit generate:sqlite</code></td></tr><tr><td>3ï¸âƒ£ ãƒ­ãƒ¼ã‚«ãƒ«ã§æ¤œè¨¼</td><td>SQLite ã§è©¦ã™ï¼ˆä»»æ„ï¼‰</td></tr><tr><td>4ï¸âƒ£ D1 ã«åæ˜ </td><td><code>wrangler d1 execute &lt;DBå&gt; --file=...</code></td></tr><tr><td>5ï¸âƒ£ ãƒ•ãƒ­ãƒ³ãƒˆã§å‹•ä½œç¢ºèª</td><td>Next.js ã‹ã‚‰ API ã‚’å©ã„ã¦ãƒã‚§ãƒƒã‚¯</td></tr></tbody></table><hr><hr><h2 id="âœ…-ã€Œã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã€ã®æ­£ã—ã„æ„å‘³ã¨ã¯" tabindex="-1">âœ… ã€Œã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã€ã®æ­£ã—ã„æ„å‘³ã¨ã¯ï¼Ÿ <a class="header-anchor" href="#âœ…-ã€Œã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã€ã®æ­£ã—ã„æ„å‘³ã¨ã¯" aria-label="Permalink to &quot;âœ… ã€Œã‚¹ã‚­ãƒ¼ãƒå¤‰æ›´ã€ã®æ­£ã—ã„æ„å‘³ã¨ã¯ï¼Ÿ&quot;">â€‹</a></h2><blockquote><p><strong><code>schema.sql</code> ã¾ãŸã¯ <code>schema.ts</code> ã‚’æ›´æ–°</strong><br> ã“ã‚Œã¯ã€Œ<strong>ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆâ‰’ ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ ï¼‰ã‚’å¤‰æ›´ã™ã‚‹ä½œæ¥­</strong>ã€ã§ã™ã€‚</p></blockquote><p>ãŸã¨ãˆã°ï¼š</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">// schema.tsï¼ˆdrizzleç”¨ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> products</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> sqliteTable</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">products</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">  id</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> integer</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">primaryKey</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> text</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">name</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">notNull</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">  price</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> integer</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">price</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">notNull</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span></code></pre></div><p>ã“ã®ã‚ˆã†ãªå¤‰æ›´ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚„ã£ãŸã‚ã¨ã« Cloudflare D1 ã«<strong>åæ˜ ã•ã›ã‚‹ä½œæ¥­</strong>ãŒåˆ¥é€”å¿…è¦ã§ã™ã€‚</p><hr><h2 id="âœ…-ã¾ã¨ã‚ã‚‹ã¨ã€ä½œæ¥­ãƒ•ãƒ­ãƒ¼ã¯ã“ã†" tabindex="-1">âœ… ã¾ã¨ã‚ã‚‹ã¨ã€ä½œæ¥­ãƒ•ãƒ­ãƒ¼ã¯ã“ã†ï¼š <a class="header-anchor" href="#âœ…-ã¾ã¨ã‚ã‚‹ã¨ã€ä½œæ¥­ãƒ•ãƒ­ãƒ¼ã¯ã“ã†" aria-label="Permalink to &quot;âœ… ã¾ã¨ã‚ã‚‹ã¨ã€ä½œæ¥­ãƒ•ãƒ­ãƒ¼ã¯ã“ã†ï¼š&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>æ‰‹é †</th><th>å†…å®¹</th><th>å ´æ‰€</th></tr></thead><tbody><tr><td>â‘  schema.ts å¤‰æ›´</td><td>ãƒ­ãƒ¼ã‚«ãƒ«ã§ã‚¹ã‚­ãƒ¼ãƒã‚’æ›´æ–°ï¼ˆDrizzleï¼‰</td><td>ã‚ãªãŸã®ãƒ‘ã‚½ã‚³ãƒ³ï¼ˆVSCode ãªã©ï¼‰</td></tr><tr><td>â‘¡ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ</td><td><code>npx drizzle-kit generate:sqlite</code></td><td>ãƒ­ãƒ¼ã‚«ãƒ«</td></tr><tr><td>â‘¢ SQLite ã«è©¦ã—åæ˜ ï¼ˆä»»æ„ï¼‰</td><td><code>npx drizzle-kit push:sqlite</code></td><td>ãƒ­ãƒ¼ã‚«ãƒ«</td></tr><tr><td>â‘£ Cloudflare D1 ã«åæ˜ </td><td><code>wrangler d1 execute &lt;dbå&gt; --file=...</code></td><td>D1ï¼ˆã‚¯ãƒ©ã‚¦ãƒ‰ï¼‰</td></tr></tbody></table><hr><h2 id="âœ…-ã‚ˆãã‚ã‚‹èª¤è§£ã«æ³¨æ„" tabindex="-1">âœ… ã‚ˆãã‚ã‚‹èª¤è§£ã«æ³¨æ„ï¼ <a class="header-anchor" href="#âœ…-ã‚ˆãã‚ã‚‹èª¤è§£ã«æ³¨æ„" aria-label="Permalink to &quot;âœ… ã‚ˆãã‚ã‚‹èª¤è§£ã«æ³¨æ„ï¼&quot;">â€‹</a></h2><ul><li><code>schema.ts</code> ã‚’æ›¸ãæ›ãˆãŸã ã‘ã§ã¯ D1 å´ã«ã¯ <strong>ä½•ã‚‚å¤‰ã‚ã‚‰ãªã„</strong>ã€‚</li><li><code>drizzle-kit generate</code> ã¯ã€Œãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ SQL ã‚’<strong>ç”Ÿæˆ</strong>ã€ã™ã‚‹ã ã‘ã€‚</li><li>å®Ÿéš›ã« D1 ã«åæ˜ ã™ã‚‹ã«ã¯ <code>wrangler d1 execute</code> ã§ <strong>ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒå¿…è¦</strong>ã€‚</li></ul><hr><h2 id="ğŸ’¡-ã¤ã¾ã‚Šã“ã†ã„ã†ã“ã¨" tabindex="-1">ğŸ’¡ ã¤ã¾ã‚Šã“ã†ã„ã†ã“ã¨ï¼š <a class="header-anchor" href="#ğŸ’¡-ã¤ã¾ã‚Šã“ã†ã„ã†ã“ã¨" aria-label="Permalink to &quot;ğŸ’¡ ã¤ã¾ã‚Šã“ã†ã„ã†ã“ã¨ï¼š&quot;">â€‹</a></h2><blockquote><p>ğŸ” <strong>ãƒ­ãƒ¼ã‚«ãƒ«ã® schema.ts = è¨­è¨ˆå›³ï¼ˆBlueprintï¼‰</strong><br> ğŸ§  <strong>D1ï¼ˆCloudflareï¼‰ = æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</strong><br> ğŸ› ï¸ <strong><code>wrangler d1 execute</code> = è¨­è¨ˆå›³ã‚’æœ¬ç•ªã«åæ˜ ã™ã‚‹ä½œæ¥­</strong></p></blockquote><hr><p>ã‚‚ã—ã“ã®è¾ºã®ä½œæ¥­ã‚’ã‚‚ã£ã¨æ¥½ã«ã—ãŸã„ãƒ»è‡ªå‹•åŒ–ã—ãŸã„å ´åˆã¯ã€Œãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç®¡ç†ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€ã‚„ <code>npm run migrate</code> ã®ã‚ˆã†ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ç”¨æ„ã™ã‚‹ã®ã‚‚ãŠã™ã™ã‚ã§ã™ã€‚</p><p>æ°—ã«ãªã£ãŸã‚‰ä¸€ç·’ã«çµ„ã¿ã¾ã—ã‚‡ã†ã‹ï¼Ÿ</p><p>ã¯ã„ã€<strong>ãã®ã‚¿ã‚¹ã‚¯æ§‹æˆã¯å®Œå…¨ã«å¯èƒ½ã§ã™</strong>ã€‚<br> Cloudflare Workers + D1ï¼ˆ<code>shopping-db</code>ï¼‰ã‚’ä½¿ã£ã¦ã€<strong>ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã—ãªãŒã‚‰ Cloudflare å´ã®æœ¬ç•ª D1 ã«æ¥ç¶šãƒ»åŒæœŸ</strong>ã™ã‚‹æ§‹æˆã‚’å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p><hr><h2 id="âœ…-ã‚ãªãŸã®ç›®çš„ã‚’æ•´ç†" tabindex="-1">âœ… ã‚ãªãŸã®ç›®çš„ã‚’æ•´ç† <a class="header-anchor" href="#âœ…-ã‚ãªãŸã®ç›®çš„ã‚’æ•´ç†" aria-label="Permalink to &quot;âœ… ã‚ãªãŸã®ç›®çš„ã‚’æ•´ç†&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ã‚¿ã‚¹ã‚¯</th><th>èª¬æ˜</th></tr></thead><tbody><tr><td>â‘ </td><td>ãƒ­ãƒ¼ã‚«ãƒ«ã® <code>kaikyou_shop</code> ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã® D1 ã‚¹ã‚­ãƒ¼ãƒã‚’å£Šã—ã¦å†æ§‹ç¯‰ã—ãŸã„</td></tr><tr><td>â‘¡</td><td>Cloudflare ä¸Šã«åŒã˜åå‰ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ <code>kaikyou_shop</code> ã‚’ä½œã‚Šã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚³ãƒ¼ãƒ‰ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸã„</td></tr><tr><td>â‘¢</td><td>Cloudflare ã« <code>shopping-db</code> ã¨ã„ã† D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ãŸã„</td></tr><tr><td>â‘£</td><td>ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚ã‚‚ Cloudflare ã® <code>shopping-db</code> ã«æ¥ç¶šã—ã¦å‹•ã‹ã—ãŸã„</td></tr></tbody></table><hr><h2 id="âœ…-æ‰‹é †æ›¸-ãƒ­ãƒ¼ã‚«ãƒ«-â†’-cloudflare-åŒæœŸé–‹ç™ºæ§‹æˆ" tabindex="-1">âœ… æ‰‹é †æ›¸ï¼šãƒ­ãƒ¼ã‚«ãƒ« â†’ Cloudflare åŒæœŸé–‹ç™ºæ§‹æˆ <a class="header-anchor" href="#âœ…-æ‰‹é †æ›¸-ãƒ­ãƒ¼ã‚«ãƒ«-â†’-cloudflare-åŒæœŸé–‹ç™ºæ§‹æˆ" aria-label="Permalink to &quot;âœ… æ‰‹é †æ›¸ï¼šãƒ­ãƒ¼ã‚«ãƒ« â†’ Cloudflare åŒæœŸé–‹ç™ºæ§‹æˆ&quot;">â€‹</a></h2><hr><h3 id="ğŸ”§-å‰æ" tabindex="-1">ğŸ”§ å‰æ <a class="header-anchor" href="#ğŸ”§-å‰æ" aria-label="Permalink to &quot;ğŸ”§ å‰æ&quot;">â€‹</a></h3><ul><li><code>wrangler</code> ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ (<code>npm install -g wrangler</code>)</li><li>Cloudflare ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆã¿ï¼š<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> login</span></span></code></pre></div></li></ul><hr><h2 id="ğŸ“˜-ã‚¹ãƒ†ãƒƒãƒ•ã‚šãƒã‚™ã‚¤ã‚¹ãƒ†ãƒƒãƒ•ã‚š" tabindex="-1">ğŸ“˜ ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ— <a class="header-anchor" href="#ğŸ“˜-ã‚¹ãƒ†ãƒƒãƒ•ã‚šãƒã‚™ã‚¤ã‚¹ãƒ†ãƒƒãƒ•ã‚š" aria-label="Permalink to &quot;ğŸ“˜ ã‚¹ãƒ†ãƒƒãƒ—ãƒã‚¤ã‚¹ãƒ†ãƒƒãƒ—&quot;">â€‹</a></h2><hr><h3 id="âœ…-step-1-ãƒ­ãƒ¼ã‚«ãƒ«-d1-ã‚¹ã‚­ãƒ¼ãƒã‚’å†æ§‹ç¯‰" tabindex="-1">âœ… Step 1: ãƒ­ãƒ¼ã‚«ãƒ« D1 ã‚¹ã‚­ãƒ¼ãƒã‚’å†æ§‹ç¯‰ <a class="header-anchor" href="#âœ…-step-1-ãƒ­ãƒ¼ã‚«ãƒ«-d1-ã‚¹ã‚­ãƒ¼ãƒã‚’å†æ§‹ç¯‰" aria-label="Permalink to &quot;âœ… Step 1: ãƒ­ãƒ¼ã‚«ãƒ« D1 ã‚¹ã‚­ãƒ¼ãƒã‚’å†æ§‹ç¯‰&quot;">â€‹</a></h3><ol><li><code>backend/db/schema.sql</code> ã‚’ç ´æ£„ï¼ˆã‚‚ã—ãã¯ä¸Šæ›¸ãï¼‰</li><li>æ–°ã—ã„ã‚¹ã‚­ãƒ¼ãƒã‚’æ›¸ãç›´ã™ï¼ˆã™ã§ã«ã‚ã‚Šã¾ã™ï¼‰</li></ol><hr><h3 id="âœ…-step-2-cloudflare-ãƒ•ã‚šãƒ­ã‚·ã‚™ã‚§ã‚¯ãƒˆ-kaikyou-shop-ã‚’ä½œæˆ" tabindex="-1">âœ… Step 2: Cloudflare ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ <code>kaikyou_shop</code> ã‚’ä½œæˆ <a class="header-anchor" href="#âœ…-step-2-cloudflare-ãƒ•ã‚šãƒ­ã‚·ã‚™ã‚§ã‚¯ãƒˆ-kaikyou-shop-ã‚’ä½œæˆ" aria-label="Permalink to &quot;âœ… Step 2: Cloudflare ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ \`kaikyou_shop\` ã‚’ä½œæˆ&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#82AAFF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> kaikyou_shop</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> init</span></span></code></pre></div><ul><li>è³ªå•ã«å¯¾ã—ã¦ã€Œæ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ã†ã€â†’ã€ŒYesã€</li><li><code>wrangler.toml</code> ãŒç”Ÿæˆã•ã‚Œã¾ã™</li></ul><hr><h3 id="âœ…-step-3-cloudflare-ã«-d1-ãƒ†ã‚™ãƒ¼ã‚¿ãƒ˜ã‚™ãƒ¼ã‚¹-shopping-db-ã‚’ä½œæˆ" tabindex="-1">âœ… Step 3: Cloudflare ã« D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ <code>shopping-db</code> ã‚’ä½œæˆ <a class="header-anchor" href="#âœ…-step-3-cloudflare-ã«-d1-ãƒ†ã‚™ãƒ¼ã‚¿ãƒ˜ã‚™ãƒ¼ã‚¹-shopping-db-ã‚’ä½œæˆ" aria-label="Permalink to &quot;âœ… Step 3: Cloudflare ã« D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ \`shopping-db\` ã‚’ä½œæˆ&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> d1</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> create</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> shopping-db</span></span></code></pre></div><p>æˆåŠŸã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªæƒ…å ±ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">ğŸŒ€</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> Successfully</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> created</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> DB:</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> shopping-db</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> (ID: </span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">xxxxxxx</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span></span></code></pre></div><hr><h3 id="âœ…-step-4-wrangler-toml-ã‚’ç·¨é›†ã—ã¦åŒæœŸè¨­å®š" tabindex="-1">âœ… Step 4: <code>wrangler.toml</code> ã‚’ç·¨é›†ã—ã¦åŒæœŸè¨­å®š <a class="header-anchor" href="#âœ…-step-4-wrangler-toml-ã‚’ç·¨é›†ã—ã¦åŒæœŸè¨­å®š" aria-label="Permalink to &quot;âœ… Step 4: \`wrangler.toml\` ã‚’ç·¨é›†ã—ã¦åŒæœŸè¨­å®š&quot;">â€‹</a></h3><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">name </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">kaikyou_shop</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">compatibility_date </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">2025-04-26</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">d1_databases</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">binding </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">DB</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"> # Worker ã‹ã‚‰ä½¿ã†æ™‚ã¯ \`env.DB\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">database_name </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">shopping-db</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">database_id </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span></code></pre></div><hr><h3 id="âœ…-step-5-cloudflare-ã®-d1-ã«ã‚¹ã‚­ãƒ¼ãƒã‚’åŒæœŸ-åˆæœŸåŒ–" tabindex="-1">âœ… Step 5: Cloudflare ã® D1 ã«ã‚¹ã‚­ãƒ¼ãƒã‚’åŒæœŸï¼ˆåˆæœŸåŒ–ï¼‰ <a class="header-anchor" href="#âœ…-step-5-cloudflare-ã®-d1-ã«ã‚¹ã‚­ãƒ¼ãƒã‚’åŒæœŸ-åˆæœŸåŒ–" aria-label="Permalink to &quot;âœ… Step 5: Cloudflare ã® D1 ã«ã‚¹ã‚­ãƒ¼ãƒã‚’åŒæœŸï¼ˆåˆæœŸåŒ–ï¼‰&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> d1</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> execute</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> shopping-db</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --file</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> backend/db/schema.sql</span></span></code></pre></div><p>ã“ã‚Œã§ Cloudflare ä¸Šã® <code>shopping-db</code> ã«ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚</p><hr><h3 id="âœ…-step-6-ãƒ­ãƒ¼ã‚«ãƒ«ã¦ã‚™-shopping-db-ã«æ¥ç¶šã—ã¦é–‹ç™º" tabindex="-1">âœ… Step 6: ãƒ­ãƒ¼ã‚«ãƒ«ã§ <code>shopping-db</code> ã«æ¥ç¶šã—ã¦é–‹ç™º <a class="header-anchor" href="#âœ…-step-6-ãƒ­ãƒ¼ã‚«ãƒ«ã¦ã‚™-shopping-db-ã«æ¥ç¶šã—ã¦é–‹ç™º" aria-label="Permalink to &quot;âœ… Step 6: ãƒ­ãƒ¼ã‚«ãƒ«ã§ \`shopping-db\` ã«æ¥ç¶šã—ã¦é–‹ç™º&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># é€šå¸¸ã®ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚³ãƒãƒ³ãƒ‰ï¼ˆWorker ã®å ´åˆï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> dev</span></span></code></pre></div><ul><li>ã“ã®ã¨ãã€<code>env.DB</code> ã« Cloudflare ã® D1ï¼ˆshopping-dbï¼‰ãŒæ¥ç¶šã•ã‚Œã¾ã™ã€‚</li><li>å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ã§ <code>env.DB</code> ã‚’ä½¿ã£ã¦é–‹ç™ºã™ã‚‹ã ã‘ã§ã€Cloudflare æœ¬ç•ªã¨åŒæœŸã•ã‚ŒãŸ DB ã«å¯¾ã—ã¦é–‹ç™ºã§ãã¾ã™ã€‚</li></ul><hr><h3 id="âœ…-step-7-cloudflare-ã¸ãƒ†ã‚™ãƒ•ã‚šãƒ­ã‚¤" tabindex="-1">âœ… Step 7: Cloudflare ã¸ãƒ‡ãƒ—ãƒ­ã‚¤ <a class="header-anchor" href="#âœ…-step-7-cloudflare-ã¸ãƒ†ã‚™ãƒ•ã‚šãƒ­ã‚¤" aria-label="Permalink to &quot;âœ… Step 7: Cloudflare ã¸ãƒ‡ãƒ—ãƒ­ã‚¤&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> publish</span></span></code></pre></div><p>Cloudflare ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¹ã‚­ãƒ¼ãƒãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€<strong>å®Œå…¨åŒæœŸã•ã‚ŒãŸçŠ¶æ…‹</strong>ã§ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§ã‚‚æœ¬ç•ªé‹ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p><hr><h2 id="âœ…-ãƒ•ã‚©ãƒ«ã‚¿ã‚™æ§‹æˆä¾‹-æœ€å°æ§‹æˆ" tabindex="-1">âœ… ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆä¾‹ï¼ˆæœ€å°æ§‹æˆï¼‰ <a class="header-anchor" href="#âœ…-ãƒ•ã‚©ãƒ«ã‚¿ã‚™æ§‹æˆä¾‹-æœ€å°æ§‹æˆ" aria-label="Permalink to &quot;âœ… ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆä¾‹ï¼ˆæœ€å°æ§‹æˆï¼‰&quot;">â€‹</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span>kaikyou_shop/</span></span>
<span class="line"><span>â”œâ”€â”€ backend/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ db/</span></span>
<span class="line"><span>â”‚   â”‚   â””â”€â”€ schema.sql</span></span>
<span class="line"><span>â”‚   â””â”€â”€ src/</span></span>
<span class="line"><span>â”‚       â””â”€â”€ routes/</span></span>
<span class="line"><span>â”‚           â””â”€â”€ productGet.ts</span></span>
<span class="line"><span>â”œâ”€â”€ wrangler.toml</span></span>
<span class="line"><span>â””â”€â”€ package.json</span></span></code></pre></div><hr><h2 id="âœ…-è£œè¶³-ã‚ˆãã‚ã‚‹ãƒŸã‚¹" tabindex="-1">âœ… è£œè¶³ï¼šã‚ˆãã‚ã‚‹ãƒŸã‚¹ <a class="header-anchor" href="#âœ…-è£œè¶³-ã‚ˆãã‚ã‚‹ãƒŸã‚¹" aria-label="Permalink to &quot;âœ… è£œè¶³ï¼šã‚ˆãã‚ã‚‹ãƒŸã‚¹&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ãƒŸã‚¹</th><th>ä¿®æ­£æ–¹æ³•</th></tr></thead><tbody><tr><td><code>env.DB</code> ãŒ undefined</td><td><code>wrangler.toml</code> ã® <code>binding = &quot;DB&quot;</code> ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</td></tr><tr><td>ãƒ­ãƒ¼ã‚«ãƒ«ã§ DB ã«æ¥ç¶šã§ããªã„</td><td><code>wrangler dev</code> ã§èµ·å‹•ã—ã€binding ã®åå‰ã‚’æƒãˆã‚‹</td></tr><tr><td>ã‚¹ã‚­ãƒ¼ãƒãŒåæ˜ ã•ã‚Œã¦ã„ãªã„</td><td><code>d1 execute</code> ã§æ­£ã—ã„ DB åã‚’æŒ‡å®šã—ã¦å®Ÿè¡Œã—ãŸã‹ç¢ºèª</td></tr></tbody></table><hr><h2 id="âœ…-ã¾ã¨ã‚" tabindex="-1">âœ… ã¾ã¨ã‚ <a class="header-anchor" href="#âœ…-ã¾ã¨ã‚" aria-label="Permalink to &quot;âœ… ã¾ã¨ã‚&quot;">â€‹</a></h2><table tabindex="0"><thead><tr><th>ã‚¿ã‚¹ã‚¯</th><th>å®Ÿç¾æ–¹æ³•</th></tr></thead><tbody><tr><td>ãƒ­ãƒ¼ã‚«ãƒ«ã®ã‚¹ã‚­ãƒ¼ãƒå†æ§‹ç¯‰</td><td><code>schema.sql</code> ã‚’ä¸Šæ›¸ãã—ã¦ <code>d1 execute</code></td></tr><tr><td>Cloudflare ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ</td><td><code>wrangler init</code> ã§ <code>kaikyou_shop</code> ã‚’ç”Ÿæˆ</td></tr><tr><td>D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ</td><td><code>wrangler d1 create shopping-db</code></td></tr><tr><td>Cloudflare ã¨ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã‚’åŒæœŸ</td><td><code>wrangler.toml</code> ã«è¨­å®šã—ã¦ <code>wrangler dev</code> ã§é–‹ç™º</td></tr></tbody></table><hr><p>ã“ã®æ§‹æˆã§ã€Cloudflare ã® D1 ã‚’æœ¬ç•ªãƒ»é–‹ç™ºç’°å¢ƒã¨ã—ã¦ä½µç”¨ã—ã¤ã¤ã€ã‚³ãƒ¼ãƒ‰ã¨ã‚¹ã‚­ãƒ¼ãƒã‚’å®Œå…¨åŒæœŸã—ãªãŒã‚‰å¿«é©ã«é–‹ç™ºã§ãã¾ã™ã€‚</p><p>ã•ã‚‰ã« CI/CDã€åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥ã€Admin UI æ¥ç¶šï¼ˆD1 Explorerï¼‰ãªã©ã‚’çµ„ã¿è¾¼ã‚€ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚<br> å¿…è¦ãªã‚‰ãã¡ã‚‰ã‚‚æ‰‹é †å‡ºã›ã¾ã™ã‚ˆï¼</p>`,185)]))}const g=i(t,[["render",l]]);export{E as __pageData,g as default};
