import{_ as i,c as a,o as t,ae as h}from"./chunks/framework.4ukD4ZLJ.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"about/douki.md","filePath":"about/douki.md"}'),n={name:"about/douki.md"};function l(k,s,p,e,r,F){return t(),a("div",null,s[0]||(s[0]=[h(`<p>ç¾åœ¨ã®çŠ¶æ³ã‚’æ­£ç¢ºã«æŠŠæ¡ã—ã¾ã—ãŸï¼<code>shopping-db</code> ã¨ã„ã† D1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒæ—¢ã«ä½œæˆæ¸ˆã¿ã§ã™ï¼ˆUUID: <code>f48c6205-4a37-4438-811e-1cb0d57c0e6d</code>ï¼‰ã€‚ã“ã“ã‹ã‚‰ <strong>ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã¨ã‚¯ãƒ©ã‚¦ãƒ‰åŒæœŸ</strong> ã‚’ã‚¹ãƒ ãƒ¼ã‚ºã«è¡Œã†ãŸã‚ã®å…·ä½“çš„ãªæ‰‹é †ã‚’ã”èª¬æ˜ã—ã¾ã™ã€‚</p><hr><h3 id="ğŸš€-step-1-ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®åˆæœŸè¨­å®š" tabindex="-1">ğŸš€ <strong>Step 1: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®åˆæœŸè¨­å®š</strong> <a class="header-anchor" href="#ğŸš€-step-1-ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®åˆæœŸè¨­å®š" aria-label="Permalink to &quot;ğŸš€ **Step 1: ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®åˆæœŸè¨­å®š**&quot;">â€‹</a></h3><h4 id="_1-wrangler-toml-ã®æ›´æ–°" tabindex="-1">1. <strong>wrangler.toml ã®æ›´æ–°</strong> <a class="header-anchor" href="#_1-wrangler-toml-ã®æ›´æ–°" aria-label="Permalink to &quot;1. **wrangler.toml ã®æ›´æ–°**&quot;">â€‹</a></h4><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># wrangler.toml</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">[[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">d1_databases</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">]]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">binding </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">DB</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">database_name </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">shopping-db</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">database_id </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">f48c6205-4a37-4438-811e-1cb0d57c0e6d</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"> # å®Ÿéš›ã®UUIDã‚’æŒ‡å®š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">preview_database_id </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">f48c6205-4a37-4438-811e-1cb0d57c0e6d</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"> # ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”¨ã«ã‚‚åŒã˜DBã‚’æŒ‡å®š</span></span></code></pre></div><h4 id="_2-ãƒ­ãƒ¼ã‚«ãƒ«-db-ã®åˆæœŸåŒ–" tabindex="-1">2. <strong>ãƒ­ãƒ¼ã‚«ãƒ« DB ã®åˆæœŸåŒ–</strong> <a class="header-anchor" href="#_2-ãƒ­ãƒ¼ã‚«ãƒ«-db-ã®åˆæœŸåŒ–" aria-label="Permalink to &quot;2. **ãƒ­ãƒ¼ã‚«ãƒ« DB ã®åˆæœŸåŒ–**&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># ã‚¹ã‚­ãƒ¼ãƒã‚’é©ç”¨ï¼ˆåˆå›ã®ã¿ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> d1</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> execute</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> shopping-db</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --local</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --file=./schema.sql</span></span></code></pre></div><hr><h3 id="ğŸ”„-step-2-åŒæ–¹å‘åŒæœŸã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰" tabindex="-1">ğŸ”„ <strong>Step 2: åŒæ–¹å‘åŒæœŸã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰</strong> <a class="header-anchor" href="#ğŸ”„-step-2-åŒæ–¹å‘åŒæœŸã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰" aria-label="Permalink to &quot;ğŸ”„ **Step 2: åŒæ–¹å‘åŒæœŸã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰**&quot;">â€‹</a></h3><h4 id="_1-åŒæœŸã‚¹ã‚¯ãƒªãƒ•ã‚šãƒˆã®ä½œæˆ" tabindex="-1">1. <strong>åŒæœŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ</strong> <a class="header-anchor" href="#_1-åŒæœŸã‚¹ã‚¯ãƒªãƒ•ã‚šãƒˆã®ä½œæˆ" aria-label="Permalink to &quot;1. **åŒæœŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½œæˆ**&quot;">â€‹</a></h4><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">// scripts/sync-db.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> execSync</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">child_process</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> commands</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">  push</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">wrangler d1 export shopping-db --local --output=tmp/local.sqlite &amp;&amp; wrangler d1 import shopping-db tmp/local.sqlite</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">  pull</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">wrangler d1 export shopping-db --output=tmp/cloud.sqlite &amp;&amp; wrangler d1 execute shopping-db --local --file=tmp/cloud.sqlite</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> mode</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> process</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">argv[</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">]</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">execSync</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">(commands[mode]</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;"> stdio</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">inherit</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span></code></pre></div><h4 id="_2-package-json-ã«ã‚³ãƒãƒ³ãƒˆã‚™è¿½åŠ " tabindex="-1">2. <strong>package.json ã«ã‚³ãƒãƒ³ãƒ‰è¿½åŠ </strong> <a class="header-anchor" href="#_2-package-json-ã«ã‚³ãƒãƒ³ãƒˆã‚™è¿½åŠ " aria-label="Permalink to &quot;2. **package.json ã«ã‚³ãƒãƒ³ãƒ‰è¿½åŠ **&quot;">â€‹</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">  &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#C792EA;">scripts</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">db:push</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">node scripts/sync-db.js push</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">db:pull</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">node scripts/sync-db.js pull</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">    &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;">dev</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">wrangler dev --local</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><hr><h3 id="ğŸ’»-step-3-next-js-ã‹ã‚‰ã®æ¥ç¶šä¾‹" tabindex="-1">ğŸ’» <strong>Step 3: Next.js ã‹ã‚‰ã®æ¥ç¶šä¾‹</strong> <a class="header-anchor" href="#ğŸ’»-step-3-next-js-ã‹ã‚‰ã®æ¥ç¶šä¾‹" aria-label="Permalink to &quot;ğŸ’» **Step 3: Next.js ã‹ã‚‰ã®æ¥ç¶šä¾‹**&quot;">â€‹</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">// app/api/products/route.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> async</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> GET</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">()</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">  const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#EEFFFF;"> stmt</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> (</span><span style="--shiki-light:#E36209;--shiki-light-font-style:inherit;--shiki-dark:#EEFFFF;--shiki-dark-font-style:italic;">env</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#FFCB6B;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> env</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">DB</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">SELECT * FROM products</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">  // ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºæ™‚</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;"> (</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">env</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">development</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">) </span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> {</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> DB</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> =</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">@cloudflare/workers-types</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> stmt</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> DB</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> }</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">())</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">  // æœ¬ç•ªç’°å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> Response</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">json</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#D73A49;--shiki-light-font-style:inherit;--shiki-dark:#89DDFF;--shiki-dark-font-style:italic;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;"> stmt</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">process</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">env</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">)</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#82AAFF;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#F07178;">())</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;">}</span></span></code></pre></div><hr><h3 id="ğŸ“¦-ãƒ†ã‚™ãƒ¼ã‚¿åŒæœŸã®å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼" tabindex="-1">ğŸ“¦ <strong>ãƒ‡ãƒ¼ã‚¿åŒæœŸã®å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼</strong> <a class="header-anchor" href="#ğŸ“¦-ãƒ†ã‚™ãƒ¼ã‚¿åŒæœŸã®å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼" aria-label="Permalink to &quot;ğŸ“¦ **ãƒ‡ãƒ¼ã‚¿åŒæœŸã®å®Ÿéš›ã®ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**&quot;">â€‹</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># 1. ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºï¼ˆå¤‰æ›´ã‚’åŠ ãˆã‚‹ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> dev</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># 2. å¤‰æ›´ã‚’ã‚¯ãƒ©ã‚¦ãƒ‰ã«åæ˜ </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> db:push</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># 3. ã‚¯ãƒ©ã‚¦ãƒ‰ã®æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> run</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> db:pull</span></span></code></pre></div><hr><h3 id="ğŸ› -ãƒˆãƒ©ãƒ•ã‚™ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚¯ã‚™é›†" tabindex="-1">ğŸ›  <strong>ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é›†</strong> <a class="header-anchor" href="#ğŸ› -ãƒˆãƒ©ãƒ•ã‚™ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚¯ã‚™é›†" aria-label="Permalink to &quot;ğŸ›  **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°é›†**&quot;">â€‹</a></h3><h4 id="âŒ-error-no-such-d1-database-ã‹ã‚™å‡ºã‚‹å ´åˆ" tabindex="-1">âŒ <code>Error: No such D1 database</code> ãŒå‡ºã‚‹å ´åˆ <a class="header-anchor" href="#âŒ-error-no-such-d1-database-ã‹ã‚™å‡ºã‚‹å ´åˆ" aria-label="Permalink to &quot;âŒ \`Error: No such D1 database\` ãŒå‡ºã‚‹å ´åˆ&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># 1. ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ç¢ºèª</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> d1</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> list</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># 2. ãƒ­ãƒ¼ã‚«ãƒ«DBå†ä½œæˆ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> d1</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> execute</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> shopping-db</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --local</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --remote</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --file=schema.sql</span></span></code></pre></div><h4 id="âŒ-ãƒã‚¤ã‚¯ã‚™ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç«¶åˆã‹ã‚™ç™ºç”Ÿã—ãŸå ´åˆ" tabindex="-1">âŒ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç«¶åˆãŒç™ºç”Ÿã—ãŸå ´åˆ <a class="header-anchor" href="#âŒ-ãƒã‚¤ã‚¯ã‚™ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç«¶åˆã‹ã‚™ç™ºç”Ÿã—ãŸå ´åˆ" aria-label="Permalink to &quot;âŒ ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç«¶åˆãŒç™ºç”Ÿã—ãŸå ´åˆ&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># å·®åˆ†ç¢ºèªãƒ„ãƒ¼ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> sqlite3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># å·®åˆ†æ¯”è¼ƒ</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sqlite3</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> tmp/cloud.sqlite</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">.schema</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> cloud_schema.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">sqlite3</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> tmp/local.sqlite</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;"> &quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">.schema</span><span style="--shiki-light:#032F62;--shiki-dark:#89DDFF;">&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#89DDFF;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> local_schema.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">diff</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> local_schema.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> cloud_schema.txt</span></span></code></pre></div><hr><h3 id="ğŸ”¥-ãƒ•ã‚šãƒ­ã‚¿ã‚™ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã¦ã‚™ã®æ³¨æ„ç‚¹" tabindex="-1">ğŸ”¥ <strong>ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ã®æ³¨æ„ç‚¹</strong> <a class="header-anchor" href="#ğŸ”¥-ãƒ•ã‚šãƒ­ã‚¿ã‚™ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã¦ã‚™ã®æ³¨æ„ç‚¹" aria-label="Permalink to &quot;ğŸ”¥ **ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ç’°å¢ƒã§ã®æ³¨æ„ç‚¹**&quot;">â€‹</a></h3><ol><li><strong>ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—è‡ªå‹•åŒ–</strong></li></ol><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;"># æ¯æ—¥AM3:00ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ï¼ˆcrontabã«è¿½åŠ ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">0</span><span style="--shiki-light:#005CC5;--shiki-dark:#F78C6C;"> 3</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> /path/to/project</span><span style="--shiki-light:#24292E;--shiki-dark:#89DDFF;"> &amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;"> wrangler</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> d1</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> export</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> shopping-db</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;"> --output=backups/</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#FFCB6B;">date</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;"> +</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">\\%</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">Y</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">\\%</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">m</span><span style="--shiki-light:#005CC5;--shiki-dark:#EEFFFF;">\\%</span><span style="--shiki-light:#032F62;--shiki-dark:#C3E88D;">d</span><span style="--shiki-light:#005CC5;--shiki-dark:#89DDFF;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#C3E88D;">.sqlite</span></span></code></pre></div><ol start="2"><li><strong>ç§»è¡Œã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«</strong></li></ol><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light material-theme-darker vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ãƒã‚§ãƒƒã‚¯</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">BEGIN</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TRANSACTION</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> products </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;"> COLUMN </span><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">description</span><span style="--shiki-light:#D73A49;--shiki-dark:#C792EA;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-light-font-style:inherit;--shiki-dark:#545454;--shiki-dark-font-style:italic;">-- ã‚¨ãƒ©ãƒ¼ãŒãªã‘ã‚Œã°COMMIT</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F78C6C;">COMMIT</span><span style="--shiki-light:#24292E;--shiki-dark:#EEFFFF;">;</span></span></code></pre></div><hr><p>ã“ã®è¨­å®šã§ <strong>ã€Œãƒ­ãƒ¼ã‚«ãƒ«ã§è‡ªç”±ã«é–‹ç™º â†’ ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ã§æœ¬ç•ªåæ˜ ã€</strong> ã¨ã„ã†ç†æƒ³çš„ãªãƒ•ãƒ­ãƒ¼ãŒå®Ÿç¾ã§ãã¾ã™ã€‚ç‰¹ã« <code>db:push</code>/<code>db:pull</code> ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯å®Ÿéš›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ç§ãŒæœ€ã‚‚é‡å®ã—ã¦ã„ã‚‹æ–¹æ³•ã§ã™ï¼</p><p>ã•ã‚‰ã«å…·ä½“çš„ãªãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆã‚„è¤‡é›‘ãªã‚¯ã‚¨ãƒªã®æœ€é©åŒ–ãŒå¿…è¦ãªå ´åˆã¯ã€ã„ã¤ã§ã‚‚è©³ç´°ã‚’ãŠèã‹ã›ãã ã•ã„ã€‚</p>`,34)]))}const o=i(n,[["render",l]]);export{g as __pageData,o as default};
